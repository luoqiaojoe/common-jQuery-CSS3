<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style>
		ul,li,h1{margin:0;padding:0;}
		ol,ul{list-style: none;}
		a{text-decoration: none;}

		h1{text-align: center;}
		img{vertical-align: middle;}
		
		.slider,.slider-content,img{ width: 800px;height: 500px; }
		.slider{position:relative;margin:50px auto;overflow: hidden;}
		.slider .btn{position: absolute;width: 50px;height: 50px;background: rgba(255,255,255,0);
			border-radius: 25px;top:50%;transform: translateY(-50%);
		}
		.slider .btn:after,.slider .btn:before{
			content: "";
			position: absolute;
			width: 25px;
			height: 3px;
			background: #fff;
			top:50%;transform: translateY(-50%);
			transition:transform .3s,background .3s;

		}
		.slider .btn-left:after,.slider .btn-left:before{ transform-origin: 1px 50%;}

		.slider .btn:hover{background: rgba(255,255,255,1);}
		.slider .btn-left{left:20px;}
		.slider .btn-left:before{left:10px;transform: rotate(60deg);}
		.slider .btn-left:after{left:10px;transform: rotate(-60deg);}
		.slider .btn-left:hover:before{background:red;transform: rotate(45deg);}
		.slider .btn-left:hover:after{background:red;transform: rotate(-45deg);}

		.slider .btn-right{right:20px;}
		.slider .btn-right:after,.slider .btn-right:before{ transform-origin: 24px 50%;}
		.slider .btn-right:before{right:10px;transform: rotate(60deg);}
		.slider .btn-right:after{right:10px;transform: rotate(-60deg);}
		.slider .btn-right:hover:before{background:red;transform: rotate(45deg);}
		.slider .btn-right:hover:after{background:red;transform: rotate(-45deg);}

		.textArea{position: absolute;bottom:0;width: 100%;line-height: 50px;background-color: rgba(0,0,0,.5);color:#fff;text-indent: 2em;}
		.indirector {position: absolute;z-index:2;bottom:0;left:50%;transform: translateX(-50%);}
		.indirector li{transition:transform .3s;float: left;width: 14px;height: 14px;border-radius: 7px;background: #fff;margin:0 5px;}
		.indirector li.current{background-color:red;transform: scale(1.5);}
		
		.indirector.ofRight {position: absolute;z-index:2;bottom:0;left:auto;right: 20px;transform: translateX(0);}


	</style>
</head>
<body>
	<h1>轮播图</h1>
	<hr>

	<div class="slider">
		<ul class="slider-content">
			<li><a href=""><img src="img/html.jpg"   alt="1.html是基础"></a></li>
			<li><a href=""><img src="img/css.jpg"    alt="2.css是长的像什么"></a></li>
			<li><a href=""><img src="img/js.jpg"     alt="3.js是动作"></a></li>
			<li><a href=""><img src="img/jquery.jpg" alt="4.你最好不用jquery"></a></li>
			<li><a href=""><img src="img/zepto.jpg" alt="5.移动端的jquery"></a></li>

		</ul>
	</div>

	<hr>

	<div class="slider">
		<ul class="slider-content">
			<li><a href=""><img src="img/angular.jpg" alt="1.锋利的前端框架"></a></li>
			<li><a href=""><img src="img/flex.jpg" alt="2.弹性布局 你的致胜法宝"></a></li>
			<li><a href=""><img src="img/less.jpg" alt="3.让你写css更简单"></a></li>
			<li><a href=""><img src="img/nodejs.jpg" alt="4.服务器的平台"></a></li>
			<li><a href=""><img src="img/react.jpg" alt="5.你不得错过的react技术"></a></li>
			<li><a href=""><img src="img/vue.jpg" alt="6.又一个前端框架"></a></li>
		</ul>
	</div>

	<script>

		function extend(defaultSetting,yourSetting){
			var newSetting = {};
			yourSetting = yourSetting || {};
			//对于defaultSetting中的每一个属性，
			//  如果这个属性在yourSetting有，就用yourSetting中的属性值
			//  如果这个属性在yourSetting没有，就用 defaultSetting 中的属性值
			for(var p in defaultSetting){
				if(yourSetting.hasOwnProperty( p )){
					newSetting[p] = yourSetting[p];
				}
				else{
					newSetting[p] = defaultSetting[p];
				}
			}


			return newSetting;
		} 

		function Slider(obj,yourSetting){

			var defaultSetting = { //系统默认设置
				speed:2000,						//播放
				index:0,						//播放的起始页，下标为0
				isauto:true,					//自动播放
				hasText:true,					//显示文本区域
				indirectorLocation:"center"	    //角标的位置
			}


			this.setting = extend(defaultSetting,yourSetting);


			//我们把用户的设置yourSetting和系统默认设置做一个综合，得到最终的设置
			//   综合考虑的规则是：
			//     如果有一个设置项 用户设置了值，就用 用户设置的值
			//     如果有一个设置项，用户没有设置值，就用默认值


			//obj是一个dom对象，它就表示包含整个轮播图dom的那个容器。
			//类似于上面的slider
			this.currentIndex =  this.setting.index;   
			this.speed        =  this.setting.speed;                                         
			this.lis 		  =  obj.querySelectorAll(".slider-content li");
			this.len          =  this.lis.length;
			this.timer        =  -1;
			this.btnLeft      = null;
			this.indirectorLis = []; //角标中li的集合

			this.createDom(obj);

			//给按钮加点击事件
			var that = this;
			this.btnLeft.addEventListener("click",function(){
				that.prev();
			})
			this.btnRight.addEventListener("click",function(){
				that.next();
			})

		// console.info(obj);//dom对象
		// console.info(this);//slider对象
			

			for (var i = 0; i < this.len; i++) {
				// var f = function(abcIndex){
				// 	return function(){
				// 		console.info(abcIndex);
				// 		that.goto(abcIndex);
				// 	}
				// }(i);

				this.indirectorLis[i].indexabc = i;
				this.indirectorLis[i].addEventListener("mouseenter",function(){
					console.info(this.indexabc);
					that.goto(this.indexabc);
				});
			}
			if ( this.setting.isauto ){

				obj.addEventListener("mouseenter",function(){
					that.pause();
				})

				obj.addEventListener("mouseleave",function(){
					that.autoPlay();
				})

				this.autoPlay();
			}

			if( !this.setting.hasText){
				this.textArea.style.display ="none";
			}
		}

		Slider.prototype.createDom = function(obj){
			//左边的按钮
			this.btnLeft = document.createElement("a");
			this.btnLeft.className = "btn btn-left";
			this.btnLeft.href ="javascript:void(0);";
			obj.appendChild(this.btnLeft);
			
			//右边的按钮
			this.btnRight = document.createElement("a");
			this.btnRight.className = "btn btn-right";
			this.btnRight.href ="javascript:void(0);";
			obj.appendChild(this.btnRight);

			//角标
			this.indirector = document.createElement("ol");
			
			if(this.setting.indirectorLocation === 'right'){
				this.indirector.className = "indirector ofRight";
			}
			else {
				this.indirector.className = "indirector";
			}
			for(var i = 0;i<this.len;i++){
				var li = document.createElement("li");
				if(i == this.currentIndex){
					li.className = "current";
				}
				this.indirectorLis.push(li);	 //把当前的li添加到 indirectorLis 数组中
				// 把li加到indirector中
				this.indirector.appendChild(li);
			}
			obj.appendChild(this.indirector);

			this.textArea     =  document.createElement("div")                //文字区域
			this.textArea.className="textArea";
			this.textArea.innerHTML = this.lis[this.currentIndex].querySelector("img")["alt"];
			obj.appendChild(this.textArea);
		}


		Slider.prototype.next = function(){

			//如果
			// if(this.currentIndex == this.len -1){
			// 	this.goto( 0 );
			// }
			// else{
			// 	this.goto( this.currentIndex +1 );
			// }

			this.goto( ( this.currentIndex + 1 )  % this.len);

		}

		Slider.prototype.prev = function(){

			//如果
			// if(this.currentIndex == 0){
			// 	this.goto( this.len - 1 );
			// }
			// else{
			// 	this.goto( this.currentIndex -1 );
			// }

			this.goto( ( this.currentIndex - 1 + this.len)  % this.len);
			// 1  % 4 ========= (1+4) %4
			// -1 % 4       -> -1;
			// (-1 + 4) % 4 --> 3

		}

		Slider.prototype.goto = function(yourIndex){
			for(var i = 0;i<this.len;i++){
				//全部隐藏
				this.lis[i].style.display = "none";
			}

			this.lis[yourIndex].style.display = "block";

			//获取第yourIndex张上的alt属性，把它填入 .textArea中
			// var t = this.lis[yourIndex].querySelector("img").getAttribute("alt");
			var t = this.lis[yourIndex].querySelector("img")["alt"];
			this.textArea.innerHTML = t;


			for(var i = 0;i<this.len;i++){ //把所有的角标上的current去掉
				//全部隐藏
				this.indirectorLis[i].className = ""
			}
			this.indirectorLis[yourIndex].className = "current"; //给当的那个li那上 current


			this.currentIndex = yourIndex;  //更新当前页的索引


			console.info("跳到这一张：yourIndex"+yourIndex)
		}

		Slider.prototype.autoPlay = function(){
			var that = this;
			this.timer = setInterval(function(){
				that.next();
			},this.speed);
		}

		Slider.prototype.pause = function(){ //暂停播放
			clearInterval(this.timer)
		}


		var objs = document.querySelectorAll(".slider");
		var obj = objs[0];
		var s1 = new Slider(obj,{speed:1000,index:3,isauto:false});        //第1个，只配置起始页
		console.info(s1);

		var s2 = new Slider(objs[1],{hasText:false,indirectorLocation:"right"});      //把第2个 只配置速度



	
	</script>
</body>
</html>